{"id":"debugg-ai-mcp-07n","title":"Telemetry: PostHog provider implementation","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.408622-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.799438-08:00","closed_at":"2026-02-26T08:40:48.799438-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-07n","depends_on_id":"debugg-ai-mcp-frz","type":"blocks","created_at":"2026-02-26T08:36:58.136037-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-07n","depends_on_id":"debugg-ai-mcp-7k8","type":"blocks","created_at":"2026-02-26T08:36:58.137205-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-07n","depends_on_id":"debugg-ai-mcp-1y1","type":"blocks","created_at":"2026-02-26T08:37:00.669628-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-0df","title":"Handler integration tests — testPageChangesHandler","description":"testPageChangesHandler.ts has no integration-level tests. Current __tests__/handlers/testPageChangesHandler.test.ts only validates schemas and logic snippets, not the handler itself.\n\nWrite tests that:\n- Mock DebuggAIServerClient (findEvaluationTemplate, executeWorkflow, pollExecution, revokeNgrokKey)\n- Mock tunnelManager.processUrl\n- Exercise the full handler flow:\n  a. Happy path — public URL, completion with screenshot\n  b. Happy path — localhost URL with tunnel setup and path-prefixed URL in contextData\n  c. Template not found → error\n  d. executeWorkflow fails → error, ngrokKey still revoked in finally\n  e. Timeout / AbortSignal cancellation\n  f. Failed execution outcome (state.outcome = 'fail')\n- Assert that contextData.targetUrl == tunnel URL (not originalUrl) when localhost\n\nUse jest.unstable_mockModule pattern (ESM) consistent with other test files.","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T14:13:22.346414-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:06:51.415934-08:00","closed_at":"2026-02-25T16:06:51.415934-08:00","close_reason":"Superseded by debugg-ai-mcp-kk3 with full spec."}
{"id":"debugg-ai-mcp-1lk","title":"Merge \u0026 Deploy: workflows tools","description":"Version bump (minor — new tools), npm publish, docker build+push. Update CLAUDE.md tool list to include new workflow tools.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:50.086935-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:30.548109-08:00","closed_at":"2026-02-24T14:15:30.548109-08:00","close_reason":"Shipped in 1.0.30","dependencies":[{"issue_id":"debugg-ai-mcp-1lk","depends_on_id":"debugg-ai-mcp-h3r","type":"blocks","created_at":"2026-02-17T16:00:59.017778-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-1lk","depends_on_id":"debugg-ai-mcp-2zm","type":"blocks","created_at":"2026-02-17T16:00:59.096501-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-1lk","depends_on_id":"debugg-ai-mcp-pdx","type":"blocks","created_at":"2026-02-19T12:25:39.509595-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-1s7","title":"Build shared URL/tunnel context resolver","description":"Create utils/tunnelContext.ts (or similar) that all tools call before making backend requests.\n\nResponsibilities:\n1. resolveTargetUrl(input: {url?, localPort?}) → string  (already partially done in testPageChangesHandler, extract and centralize)\n2. prepareRequest(url, tunnelKey, tunnelId?) → { targetUrl, tunnel: TunnelResult | null }\n   - If localhost: creates/reuses tunnel via tunnelManager, returns tunnel URL for backend\n   - If public: passthrough, no tunnel\n3. sanitizeResponse(value: unknown, originalUrl: string) → unknown\n   - Wraps replaceTunnelUrls(), only applies when original was localhost\n   - Should be called on all backend response payloads before returning to MCP caller\n\nThis replaces the ad-hoc logic scattered across each handler. All tools import from here.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T16:36:09.170528-08:00","created_by":"Quinn","updated_at":"2026-02-23T16:40:25.037769-08:00","closed_at":"2026-02-23T16:40:25.037769-08:00","close_reason":"Closed"}
{"id":"debugg-ai-mcp-1y1","title":"Telemetry: abstract provider interface + NoopProvider + TelemetryManager","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.408623-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.723549-08:00","closed_at":"2026-02-26T08:40:48.723549-08:00","close_reason":"Closed"}
{"id":"debugg-ai-mcp-2ay","title":"Tests: TunnelManager gaps (Docker, HTTPS local, connect options)","description":"tunnelManager.test.ts covers the happy path but misses important branches.\n\nTests to add to existing __tests__/services/tunnelManager.test.ts:\n\nconnect() options format:\n- authtoken is inside connect() call options, NOT via a separate global authtoken() call (already have one, verify it's robust)\n- proto is always 'http'\n- hostname is '{tunnelId}.ngrok.debugg.ai'\n- addr is the port number for plain http localhost\n\nDocker environment (DOCKER_CONTAINER=true):\n- Plain HTTP local: addr is 'host.docker.internal:{port}' string (not a number)\n- HTTPS local: addr is 'https://host.docker.internal:{port}'\n- Test: set process.env.DOCKER_CONTAINER = 'true', verify connect call, delete env after\n\nHTTPS localhost handling:\n- URL 'https://localhost:3000': addr passed to connect is 'https://localhost:3000' (not just 3000)\n- URL 'http://localhost:3000': addr is 3000 (number)\n\nError wrapping:\n- ngrok.connect() throws with 'authtoken' in message: re-thrown as 'invalid auth token' message\n- ngrok.connect() throws with other message: re-thrown as 'Failed to create tunnel: {msg}'\n\nstopTunnel already tested — verify the test for disconnect failure covers the 'entry removed from map' case explicitly (the key fix from the reliability work)","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:05:35.750872-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:14:51.042113-08:00","closed_at":"2026-02-25T16:14:51.042113-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-2hi","title":"Manual QA: run check_app_in_browser and confirm progress advances","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:49.629781-08:00","created_by":"Quinn","updated_at":"2026-02-23T18:02:55.151206-08:00","closed_at":"2026-02-23T18:02:55.151206-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-2hi","depends_on_id":"debugg-ai-mcp-50q","type":"blocks","created_at":"2026-02-23T17:52:13.396497-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-2na","title":"Implement: debugg_ai_list_templates + debugg_ai_list_executions tools","description":"Simple read-only tools. list_templates: GET /workflows/?is_template=true, return name/uuid/description of each template. list_executions: GET /workflows/executions/ with optional status filter. Both are fast/synchronous — no polling needed. Add types to types/index.ts, tool defs in tools/workflows.ts, handlers in handlers/workflowHandlers.ts.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:40.092222-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:58.122795-08:00","closed_at":"2026-02-19T12:24:58.122795-08:00","close_reason":"list_templates + list_executions not needed as standalone MCP tools — use list_tests/list_test_suites","dependencies":[{"issue_id":"debugg-ai-mcp-2na","depends_on_id":"debugg-ai-mcp-8vd","type":"blocks","created_at":"2026-02-17T16:00:58.419827-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-2pf","title":"Refactor testPageChangesHandler: execute-first tunnel flow","description":"Backend now returns tunnel_key from the execute response. Change localhost tunnel flow: OLD: getNgrokAuthToken() probe hack → create tunnel → execute. NEW: execute → get tunnel_key + resource_uuid from response → create tunnel using tunnel_key as authtoken and resource_uuid as the ngrok subdomain. Remove call to client.getNgrokAuthToken(). Remove unused tunnelId / tunnelPublicUrl pre-generation. tunnelManager.processUrl() should receive tunnel_key and resource_uuid from execute response. Depends on debugg-ai-mcp-uvy (updated executeWorkflow).","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T12:25:11.842546-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:29:58.085003-08:00","closed_at":"2026-02-19T12:29:58.085003-08:00","close_reason":"Handler refactored: execute-first, tunnel created after execute using tunnelKey+executionUuid","dependencies":[{"issue_id":"debugg-ai-mcp-2pf","depends_on_id":"debugg-ai-mcp-uvy","type":"blocks","created_at":"2026-02-19T12:25:38.66085-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-2us","title":"Implement: progress notification keeps MCP connection alive","description":"Ensure progressCallback is called at least every 30s during long E2E runs to prevent MCP client timeout. Add heartbeat ping when no meaningful update from poll. Handle progressCallback failure gracefully (dont crash the run if notification fails).","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:36.159622-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.032591-08:00","closed_at":"2026-02-17T16:10:38.032591-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-2us","depends_on_id":"debugg-ai-mcp-irs","type":"blocks","created_at":"2026-02-17T15:58:56.611318-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-2zm","title":"Workflows API Integration","description":"Implement DebuggAI Workflows API into the MCP server. Covers: service layer, MCP tools for listing templates, cloning, executing, polling executions, cancelling. Long-running executions must use the safe polling pattern from epic debugg-ai-mcp-6hk.","status":"closed","priority":1,"issue_type":"epic","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:15.277964-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:30.456377-08:00","closed_at":"2026-02-24T14:15:30.456377-08:00","close_reason":"Workflows API integrated and shipped in 1.0.30 (check_app_in_browser uses workflows service)"}
{"id":"debugg-ai-mcp-3ef","title":"Tests: config API key precedence and token type","description":"config/index.ts has a HIGH gap: the API key fallback chain is untested.\n\nTests to add to __tests__/config/config.test.ts:\n\nAPI key precedence (currently config uses multiple env var names):\n- DEBUGGAI_API_TOKEN set: used as apiKey\n- DEBUGGAI_API_TOKEN missing, DEBUGGAI_JWT_TOKEN set: used as apiKey\n- Both missing, DEBUGGAI_API_KEY set: used as apiKey\n- All missing: throws missing API key error\n\nToken type:\n- DEBUGGAI_TOKEN_TYPE='bearer': config.api.tokenType is 'bearer'\n- DEBUGGAI_TOKEN_TYPE not set: defaults to 'token'\n\nBase URL override:\n- DEBUGGAI_API_URL set: config.api.baseUrl uses that value\n- Not set: uses production default\n\nPort parsing:\n- DEBUGGAI_LOCAL_PORT='3000': parsed as integer 3000\n- DEBUGGAI_LOCAL_PORT='abc': does not crash (parseInt fallback behavior)\n- Not set: undefined or default","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:06:02.898403-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:27.088377-08:00","closed_at":"2026-02-25T16:15:27.088377-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-3sw","title":"fix: check_app_in_browser progress stalls at 30%","status":"closed","priority":1,"issue_type":"epic","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:45.172165-08:00","created_by":"Quinn","updated_at":"2026-02-23T18:02:55.19003-08:00","closed_at":"2026-02-23T18:02:55.19003-08:00","close_reason":"Closed"}
{"id":"debugg-ai-mcp-3t8","title":"Browser session start response missing tunnel_key for localhost sessions","description":"POST /api/v1/browser-sessions/sessions/ response does not include tunnel_key. Response keys: id, session_name, status, initial_url, ..., monitoring. Our startLiveSessionHandler does: if (\\!session.tunnelKey) throw new Error('Backend did not return a tunnel key for localhost session'). This means all localhost live sessions always fail. Need API team to confirm if tunnel_key is returned for localhost sessions specifically (we tested with isLocalhost: false).","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T12:01:41.730146-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:20.845212-08:00","closed_at":"2026-02-24T14:15:20.845212-08:00","close_reason":"Live session tools were deleted in the cleanup commits"}
{"id":"debugg-ai-mcp-437","title":"Telemetry: instrument workflow service (execute + poll)","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.51463-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.869563-08:00","closed_at":"2026-02-26T08:40:48.869563-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-437","depends_on_id":"debugg-ai-mcp-07n","type":"blocks","created_at":"2026-02-26T08:37:00.762846-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-4l5","title":"Delete dead e2e-agents/ and clean build","description":"Remove orphaned e2e-agents source files and do a clean dist build.\n\nFiles to delete:\n- e2e-agents/eRunner.ts\n- e2e-agents/recordingHandler.ts\n- e2e-agents/resultsFormatter.ts\n- __tests__/e2e-agents/ (check if tests reference these - if so delete them too)\n\nThen:\n1. rm -rf dist \u0026\u0026 npm run build\n2. Confirm dist/tools/terminal.js is gone\n3. npm test — all tests should pass\n4. Update CLAUDE.md: remove Docker Terminal Tools section (5 tools), fix total from 18 to 13","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T06:13:32.094308-08:00","created_by":"Quinn","updated_at":"2026-02-19T06:16:57.023301-08:00","closed_at":"2026-02-19T06:16:57.023301-08:00","close_reason":"Dead e2e-agents/ files deleted, clean build done, CLAUDE.md updated","dependencies":[{"issue_id":"debugg-ai-mcp-4l5","depends_on_id":"debugg-ai-mcp-6a3","type":"blocks","created_at":"2026-02-19T06:13:37.237705-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-50q","title":"Test: mock pollExecution and verify progress callbacks","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:47.836448-08:00","created_by":"Quinn","updated_at":"2026-02-23T18:02:55.131284-08:00","closed_at":"2026-02-23T18:02:55.131284-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-50q","depends_on_id":"debugg-ai-mcp-vtw","type":"blocks","created_at":"2026-02-23T17:52:10.423536-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-50q","depends_on_id":"debugg-ai-mcp-hx5","type":"blocks","created_at":"2026-02-23T17:52:10.513708-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-50q","depends_on_id":"debugg-ai-mcp-l3b","type":"blocks","created_at":"2026-02-23T17:52:10.601994-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-58t","title":"Epic: Ngrok tunnel verification \u0026 cleanup","description":"Verify the end-to-end ngrok tunnel flow works correctly and remove dead code.\n\n## What works\n- Both testPageChangesHandler and liveSessionHandlers use consistent pattern:\n  1. Generate UUID as tunnel subdomain\n  2. Backend API returns tunnelKey (ngrok auth token)\n  3. tunnelManager.processUrl() opens actual ngrok tunnel\n\n## Dead code to remove\n- services/ngrok/index.ts: NgrokTunnelClient is defined but never imported anywhere; only its re-export of tunnelManager is used. Replace with direct tunnelManager import.\n\n## Verification needed\n- Manual QA: localhost URL -\u003e tunnel created -\u003e backend can reach it\n- Check tunnel cleanup in finally blocks fires correctly\n- Verify 55min auto-shutoff timer works\n- Test tunnel reuse (same port = same tunnel)\n\n## Tasks\n1. Manual E2E: test check_app_in_browser with a localhost URL\n2. Clean up services/ngrok/index.ts dead NgrokTunnelClient class\n3. Update any imports that use services/ngrok/index.ts to import tunnelManager directly","status":"closed","priority":1,"issue_type":"epic","owner":"quinnosha@gmail.com","created_at":"2026-02-19T06:13:10.775899-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:29:58.439386-08:00","closed_at":"2026-02-19T12:29:58.439386-08:00","close_reason":"Ngrok tunnel epic complete: probe hack removed, execute-first flow, revocation in place"}
{"id":"debugg-ai-mcp-5ga","title":"Remove getNgrokAuthToken probe-test hack from client","description":"getNgrokAuthToken() in services/index.ts creates a probe e2e test, waits for it, extracts the ngrok token, then deletes the test. This was a workaround — backend now returns tunnel_key directly from execute/. Remove getNgrokAuthToken() from DebuggAIServerClient entirely. Remove any cached token state. Clean up probe test remains in the test list if possible. Depends on debugg-ai-mcp-2pf (handler refactored to no longer call it).","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T12:25:23.559062-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:29:58.267714-08:00","closed_at":"2026-02-19T12:29:58.267714-08:00","close_reason":"getNgrokAuthToken removed from DebuggAIServerClient; liveSessionHandler uses session.tunnelKey directly","dependencies":[{"issue_id":"debugg-ai-mcp-5ga","depends_on_id":"debugg-ai-mcp-2pf","type":"blocks","created_at":"2026-02-19T12:25:38.841681-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-5t5","title":"Add localhost tunnel support to quickScreenshot","description":"quickScreenshot tool silently fails or times out when given a localhost URL because it passes the URL directly to the backend without tunneling.\n\nFix: use the shared tunnel context resolver (from the centralization task) to:\n1. Detect if URL is localhost\n2. Create/reuse tunnel\n3. Pass tunnel URL to the quick screenshot API\n4. Sanitize response URLs before returning\n\nCurrently agents misuse this tool with localhost URLs and get confusing timeout errors.","status":"closed","priority":2,"issue_type":"feature","owner":"quinnosha@gmail.com","created_at":"2026-02-23T16:36:09.157155-08:00","created_by":"Quinn","updated_at":"2026-02-23T16:40:25.191326-08:00","closed_at":"2026-02-23T16:40:25.191326-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-5t5","depends_on_id":"debugg-ai-mcp-1s7","type":"blocks","created_at":"2026-02-23T16:36:19.736942-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-5uk","title":"Add env/credential params to check_app_in_browser tool","description":"Backend execute/ now supports env field for credential/environment resolution. Expose these optional params on check_app_in_browser: credentialRole (string) — pick cred by role from project default env; username + password (strings) — inline creds, stored for reuse; environmentId + credentialId (strings) — direct references. All optional. Pass through as env in executeWorkflow call. Useful for testing auth-required apps. Depends on debugg-ai-mcp-uvy.","status":"closed","priority":3,"issue_type":"feature","owner":"quinnosha@gmail.com","created_at":"2026-02-19T12:25:33.128005-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:21.870113-08:00","closed_at":"2026-02-24T14:15:21.870113-08:00","close_reason":"env/credential params already implemented in check_app_in_browser (environmentId, credentialId, credentialRole, username, password)","dependencies":[{"issue_id":"debugg-ai-mcp-5uk","depends_on_id":"debugg-ai-mcp-uvy","type":"blocks","created_at":"2026-02-19T12:25:38.943813-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-5vj","title":"MCP: call tunnel setup endpoint before executeWorkflow","description":"Update testPageChangesHandler.ts to:\n1. Call POST /api/v1/tunnels/ FIRST (new service method client.workflows.setupTunnel()) → returns { tunnelId, tunnelKey, keyId }\n2. Use tunnelKey + tunnelId to create the tunnel via ensureTunnel() BEFORE calling executeWorkflow\n3. Build the actual public URL: https://{tunnelId}.ngrok.debugg.ai/p/{port}/ for Caddy mode, https://{tunnelId}.ngrok.debugg.ai/ for per-port fallback — this URL comes from tunnelManager.processUrl()\n4. Pass that tunnel URL as contextData.targetUrl to executeWorkflow — backend navigates there verbatim\n5. executeWorkflow no longer returns tunnelKey / ngrokKeyId — revoke key using keyId from step 1\n6. Note: current handler passes localhost URL to executeWorkflow and creates tunnel after. Backend currently derives nav URL from executionUuid (ignores targetUrl), so Caddy path-prefix URL never reaches the browser agent. This change fixes that.\n\nBlocked by: backend ai0 endpoint.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T13:29:21.087569-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:46:00.757084-08:00","closed_at":"2026-02-25T15:46:00.757084-08:00","close_reason":"Implemented in this session.","dependencies":[{"issue_id":"debugg-ai-mcp-5vj","depends_on_id":"debugg-ai-mcp-ai0","type":"blocks","created_at":"2026-02-25T13:29:25.225207-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-5vj","depends_on_id":"debugg-ai-mcp-brl","type":"blocks","created_at":"2026-02-25T13:29:25.405392-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-69a","title":"Tests: urlParser edge cases and private branches","description":"urlParser.ts is well-tested for main cases. Add missing edge cases.\n\nGaps to cover:\n\nPrivate IP CIDR ranges (isLocalhostUrl internal logic):\n- 192.168.1.1 → localhost\n- 10.0.0.1 → localhost  \n- 172.16.0.1 → localhost\n- 172.31.255.255 → localhost\n- 172.32.0.1 → NOT localhost (outside range)\n- 8.8.8.8 → NOT localhost\n\ngenerateTunnelUrl() parse failure:\n- Passing a malformed URL that can't be parsed: returns original URL unchanged (catch branch)\n\nextractLocalhostPort() defaults:\n- http://localhost (no port): returns 80\n- https://localhost (no port): returns 443\n\nparseUrl() invalid input:\n- Passing 'not-a-url': throws or handles gracefully","status":"closed","priority":3,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:06:33.671218-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:27.110167-08:00","closed_at":"2026-02-25T16:15:27.110167-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-6a3","title":"Epic: Dead code removal \u0026 clean build","description":"Remove orphaned code from the old e2e-agent approach and do a clean dist build.\n\n## Dead code identified\n- e2e-agents/e2eRunner.ts — E2eTestRunner class, no imports anywhere in active code\n- e2e-agents/recordingHandler.ts — no imports anywhere in active code\n- e2e-agents/resultsFormatter.ts — no imports anywhere in active code\n- dist/tools/terminal.js — stale artifact from deleted tools/terminal.ts source; tools/index.ts does NOT register any terminal tools\n\n## What replaced e2e-agents/\n- testPageChangesHandler.ts now uses workflows API (find template → execute → poll)\n- Suite handlers use e2es service directly\n- Live session handlers use browserSessions service directly\n\n## Tasks\n1. Delete e2e-agents/eRunner.ts, recordingHandler.ts, resultsFormatter.ts\n2. Run clean build: rm -rf dist \u0026\u0026 npm run build (removes stale dist/tools/terminal.js)\n3. Update CLAUDE.md tool count (currently says 18 tools with 5 Docker Terminal Tools — those don't exist in source)\n4. Verify tests still pass after deletion\n5. Publish updated package","notes":"Check __tests__/e2e-agents/ before deleting — tests may need removal too","status":"closed","priority":2,"issue_type":"epic","owner":"quinnosha@gmail.com","created_at":"2026-02-19T06:13:17.640902-08:00","created_by":"Quinn","updated_at":"2026-02-19T06:16:57.107135-08:00","closed_at":"2026-02-19T06:16:57.107135-08:00","close_reason":"All dead code removed, verified clean"}
{"id":"debugg-ai-mcp-6hk","title":"Long-Running Task Reliability","status":"closed","priority":1,"issue_type":"epic","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:19.082751-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:39.768744-08:00","closed_at":"2026-02-24T14:15:39.768744-08:00","close_reason":"Resolved by switching to poll-based workflow execution pattern in 1.0.30 — no more setInterval/busy-wait"}
{"id":"debugg-ai-mcp-6kd","title":"Investigate: tunnel flaking on subsequent sessions","description":"Users report: first check_app_in_browser call on a localhost URL succeeds, subsequent calls fail. Need to confirm which failure mode is triggering in production logs.\n\nHypotheses to verify (in order of likelihood):\n\n1. ngrok.authtoken() global state race\n   - Every processUrl() call does ngrok.authtoken({ authtoken: newKey }) BEFORE connect()\n   - This sets global config on the ngrok daemon process\n   - Call 1 is in its finally block (fire-and-forget releaseTunnel), Call 2 starts and calls authtoken(key2)\n   - key2 overwrites the global ngrok session, potentially killing Call 1's still-running disconnect\n   - Code: tunnelManager.ts lines 316 and 447\n\n2. Key revoked before tunnel disconnected\n   - finally block order: revokeNgrokKey(ngrokKeyId) THEN releaseTunnel(ctx)\n   - Both fire-and-forget (.catch(), no await)\n   - Key revocation invalidates the ngrok session → disconnect() on that session fails → stale entry left in activeTunnels\n   - Next call for same port: findTunnelByPort() returns stale entry with dead URL\n\n3. activeTunnels stale entry after failed cleanup\n   - If releaseTunnel fails (because key was already revoked), activeTunnels still has the entry\n   - Next call: findTunnelByPort(3000) returns the stale TunnelInfo → handler tries to use dead tunnel URL → backend browser can't navigate\n\nInvestigation steps:\n- Add detailed logging around authtoken/connect/disconnect calls\n- Check what error the backend returns on second call (404? connection refused? ngrok 4xx?)\n- Check if activeTunnels has a stale entry on the second call\n- Check if releaseTunnel is throwing on the first call (logging .catch output)","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T15:09:47.908286-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:46:06.18234-08:00","closed_at":"2026-02-25T15:46:06.18234-08:00","close_reason":"Root causes confirmed and fixed in same session: global authtoken() race, wrong finally cleanup order, stale activeTunnels on disconnect failure."}
{"id":"debugg-ai-mcp-6wc","title":"Telemetry: tests for provider + event capture","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.513623-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.920966-08:00","closed_at":"2026-02-26T08:40:48.920966-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-6wc","depends_on_id":"debugg-ai-mcp-g1j","type":"blocks","created_at":"2026-02-26T08:36:58.161527-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-6wc","depends_on_id":"debugg-ai-mcp-437","type":"blocks","created_at":"2026-02-26T08:37:00.858238-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-6wc","depends_on_id":"debugg-ai-mcp-ij3","type":"blocks","created_at":"2026-02-26T08:37:00.942267-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-7bi","title":"Architecture: stop destroying tunnels per-call for same localhost server","description":"Current pattern: every check_app_in_browser call creates a tunnel, uses it, destroys it in finally. For users testing the same local server repeatedly, this means:\n  - New ngrok tunnel per call\n  - New subdomain per call  \n  - Backend has to reconnect each time\n  - Race conditions during teardown/creation\n\nThe TunnelManager already has the infrastructure for reuse: findTunnelByPort() checks for existing tunnels and activeTunnels persists across calls. But releaseTunnel() in the handler's finally block defeats this.\n\nBetter pattern:\n  - Keep the tunnel alive between calls (don't call releaseTunnel in finally)\n  - Let the 55-min auto-shutoff timer handle cleanup\n  - Only create a new tunnel if there isn't one for that port already\n  - The tunnelId changes per call (it's the executionUuid) — decouple the tunnel ID from the execution ID for reuse\n\nNote: this conflicts with the current backend expectation that the tunnel subdomain matches the executionUuid. Requires coordination with ai0/5vj work (dedicated tunnel endpoint). The dedicated tunnel endpoint returns a stable tunnelId that can be reused across executions.\n\nPrerequisite: debugg-ai-mcp-ai0 (POST /api/v1/tunnels/), debugg-ai-mcp-5vj (pre-execute tunnel setup)","status":"closed","priority":2,"issue_type":"feature","owner":"quinnosha@gmail.com","created_at":"2026-02-25T15:10:24.829646-08:00","created_by":"Quinn","updated_at":"2026-02-25T17:25:58.008353-08:00","closed_at":"2026-02-25T17:25:58.008353-08:00","close_reason":"Tunnels now reuse within-process via findExistingTunnel; revokeKey deferred to auto-shutoff; no per-call teardown","dependencies":[{"issue_id":"debugg-ai-mcp-7bi","depends_on_id":"debugg-ai-mcp-5vj","type":"blocks","created_at":"2026-02-25T15:10:29.930849-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-7k8","title":"Telemetry: standard event definitions","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.410327-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.746549-08:00","closed_at":"2026-02-26T08:40:48.746549-08:00","close_reason":"Closed"}
{"id":"debugg-ai-mcp-7ov","title":"Centralize tunnel and URL resolution across all MCP tools","description":"Currently each tool (testPageChangesHandler, liveSessionHandlers, quickScreenshot) implements its own tunnel logic, localhost detection, targetUrl resolution, and response sanitization. This causes inconsistency, duplicated bugs, and the live session race condition. We need a single TunnelRequestContext layer that all tools go through.\n\nCurrent problems:\n- testPageChangesHandler: has resolveTargetUrl(), isLocalhostUrl(), replaceTunnelUrls() all inline\n- liveSessionHandlers: generates tunnelId BEFORE calling backend (race condition), custom localhost detection\n- quickScreenshot: no tunnel support, silently fails with localhost URLs\n- Each tool independently decides how to handle tunnels, causing different failure modes\n\nTarget state: a shared request pipeline that handles URL resolution, tunnel lifecycle, and response sanitization once, for all tools.","status":"closed","priority":1,"issue_type":"epic","owner":"quinnosha@gmail.com","created_at":"2026-02-23T16:35:53.709018-08:00","created_by":"Quinn","updated_at":"2026-02-23T16:40:25.25422-08:00","closed_at":"2026-02-23T16:40:25.25422-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-7ov","depends_on_id":"debugg-ai-mcp-owj","type":"blocks","created_at":"2026-02-23T16:36:19.834814-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-7ov","depends_on_id":"debugg-ai-mcp-ho1","type":"blocks","created_at":"2026-02-23T16:36:19.920828-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-7ov","depends_on_id":"debugg-ai-mcp-5t5","type":"blocks","created_at":"2026-02-23T16:36:20.006743-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-7tk","title":"Browser session log endpoints all return 404","description":"All four log endpoints return 404 HTML (not JSON), meaning they don't exist at these paths: GET /api/v1/browser-sessions/logs/ GET /api/v1/browser-sessions/console-logs/ GET /api/v1/browser-sessions/network-events/ GET /api/v1/browser-sessions/error-logs/ Need to confirm correct endpoints from API team. Affects get_live_session_logs tool entirely.","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T12:01:39.019726-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:20.851683-08:00","closed_at":"2026-02-24T14:15:20.851683-08:00","close_reason":"Live session tools were deleted in the cleanup commits"}
{"id":"debugg-ai-mcp-8dv","title":"Implement: debugg_ai_execute_workflow + debugg_ai_get_execution_status + debugg_ai_cancel_execution","description":"Lower-level workflow controls for power users. execute_workflow: POST /workflows/{uuid}/execute/ with context_data, returns execution_uuid immediately (async — caller must poll). get_execution_status: GET /executions/{uuid}/ + GET /executions/{uuid}/nodes/ for step detail. cancel_execution: POST /executions/{uuid}/cancel/. Add to tools/workflows.ts and handlers/workflowHandlers.ts.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:40.276856-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:58.179373-08:00","closed_at":"2026-02-19T12:24:58.179373-08:00","close_reason":"Not shipping execute_workflow/cancel_execution as separate tools — power use case deferred","dependencies":[{"issue_id":"debugg-ai-mcp-8dv","depends_on_id":"debugg-ai-mcp-8vd","type":"blocks","created_at":"2026-02-17T16:00:58.580249-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-8id","title":"Fix: stale activeTunnels entry on cleanup failure","description":"When releaseTunnel() fails (ngrok disconnect throws), the TunnelInfo entry is NOT removed from activeTunnels (stopTunnel re-throws on error without deleting). On the next call for the same localhost port, findTunnelByPort() returns the stale entry and the handler uses a dead tunnel URL as the public URL.\n\nRelevant code in stopTunnel():\n  try {\n    await ngrok.disconnect(tunnelInfo.tunnelUrl);\n    this.activeTunnels.delete(tunnelId);  ← only runs on success\n  } catch (error) {\n    logger.error(...);\n    throw error;  ← stale entry remains\n  }\n\nFix: delete from activeTunnels unconditionally before disconnect, not after:\n  this.activeTunnels.delete(tunnelId);     ← remove first\n  if (tunnelInfo.autoShutoffTimer) clearTimeout(tunnelInfo.autoShutoffTimer);\n  await ngrok.disconnect(tunnelInfo.tunnelUrl).catch(err =\u003e logger.warn(...));  ← best-effort\n\nIf disconnect fails we still want the entry gone — a dead tunnel in the map is worse than a leaked ngrok connection (ngrok times those out anyway).","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-25T15:10:13.82738-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:46:06.34447-08:00","closed_at":"2026-02-25T15:46:06.34447-08:00","close_reason":"Implemented.","dependencies":[{"issue_id":"debugg-ai-mcp-8id","depends_on_id":"debugg-ai-mcp-6kd","type":"blocks","created_at":"2026-02-25T15:10:29.837449-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-8ri","title":"Schema validation: require url OR localPort at Zod level","description":"TestPageChangesInputSchema marks both url and localPort as optional. The JSON tool schema in testPageChanges.ts also has neither as required. But resolveTargetUrl() throws a runtime error if neither is provided. A user who calls check_app_in_browser with only description='test something' gets a confusing runtime throw instead of a clear schema validation error. Fix: add a Zod .refine() check that at least one of url or localPort is present, so the error is caught at validation time with a helpful message.","status":"closed","priority":2,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-24T14:15:54.712741-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:24:45.712733-08:00","closed_at":"2026-02-24T14:24:45.712733-08:00","close_reason":"Added Zod .refine() to TestPageChangesInputSchema; tests added and passing"}
{"id":"debugg-ai-mcp-8vd","title":"Implement: services/workflows.ts — Workflows API service layer","description":"Create services/workflows.ts following same pattern as services/e2es.ts and services/browserSessions.ts. Interface: WorkflowsService with methods: listWorkflows, listTemplates, getWorkflow, cloneWorkflow, executeWorkflow, getExecution, getExecutionNodes, cancelExecution, retryExecution, listExecutions. Add WorkflowsService to DebuggAIServerClient in services/index.ts.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:25.619935-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:57.88104-08:00","closed_at":"2026-02-19T12:24:57.88104-08:00","close_reason":"services/workflows.ts implemented and in production","dependencies":[{"issue_id":"debugg-ai-mcp-8vd","depends_on_id":"debugg-ai-mcp-fqu","type":"blocks","created_at":"2026-02-17T16:00:58.328752-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-8vg","title":"Dead code: remove deleted-tool schemas/types from types/index.ts","description":"types/index.ts still exports Zod schemas and TypeScript types for 10+ tools that were deleted: ListTestsInputSchema, ListTestSuitesInputSchema, CreateTestSuiteInputSchema, CreateCommitSuiteInputSchema, ListCommitSuitesInputSchema, GetTestStatusInputSchema, StartLiveSessionInputSchema, StopLiveSessionInputSchema, GetLiveSessionStatusInputSchema, GetLiveSessionLogsInputSchema, GetLiveSessionScreenshotInputSchema, and their inferred types. Also E2ETestResult interface. None are used. Should be removed to keep the types file clean and match the actual codebase.","status":"closed","priority":3,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-24T14:16:00.296401-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:24:45.807496-08:00","closed_at":"2026-02-24T14:24:45.807496-08:00","close_reason":"Removed all dead schemas/types from types/index.ts (ListTests, LiveSession, E2ETestResult, etc.)"}
{"id":"debugg-ai-mcp-99z","title":"Tests: WorkflowsService missing methods","description":"Several methods in services/workflows.ts have no tests.\n\nTests to write (mock AxiosTransport):\n\nfindEvaluationTemplate():\n- Returns the template whose name contains 'app evaluation' (case-insensitive)\n- Returns null when results array is empty\n- Throws descriptive error listing available templates when none match 'App Evaluation'\n- Picks the right one when multiple templates exist\n\nexecuteWorkflow():\n- Sends body { contextData } without env field when env is empty or not provided\n- Sends body { contextData, env } when env has keys\n- Maps resourceUuid → executionUuid in response\n- Maps resolvedEnvironmentId and resolvedCredentialId (null coalescing)\n- Throws when response has no resourceUuid\n\ngetExecution():\n- Returns execution object on 200\n- Throws 'Execution not found' when response is null/undefined\n\npollExecution():\n- Already tested (AbortSignal, progress callbacks) — add:\n- Throws timeout error after EXECUTION_TIMEOUT_MS deadline passes\n- onUpdate error is swallowed: polling continues even when callback throws\n- Returns immediately on first terminal status without additional polling","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:04:45.540789-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:14:08.380901-08:00","closed_at":"2026-02-25T16:14:08.380901-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-a1n","title":"Tests: unit tests for polling logic and cancellation","description":"Write tests for: poll loop terminates on status=completed, poll loop terminates on AbortSignal, timeout fires and cleans up, progress callback failures dont crash the run, tunnel stopTunnel called on all exit paths (spy). Mock getE2eRun to control status sequence.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:42.72423-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.034443-08:00","closed_at":"2026-02-17T16:10:38.034443-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-a1n","depends_on_id":"debugg-ai-mcp-pmr","type":"blocks","created_at":"2026-02-17T15:58:56.683307-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-ai0","title":"Backend: POST /api/v1/tunnels/ — dedicated tunnel setup endpoint","description":"New endpoint to decouple tunnel provisioning from workflow execution.\n\nPOST /api/v1/tunnels/\nRequest: { purpose: 'workflow' | 'live_session' | 'generic' }\nResponse: { tunnelId: uuid, tunnelKey: string, keyId: string, expiresAt: string }\n\ntunnelId becomes the ngrok subdomain (https://{tunnelId}.ngrok.debugg.ai)\ntunnelKey is the short-lived ngrok auth token\nkeyId is used by MCP to revoke the key after the session\n\nAlso: remove tunnelKey / ngrokKeyId / ngrokExpiresAt from executeWorkflow response — no longer needed there.\nexecuteWorkflow should treat contextData.targetUrl as the verbatim navigation URL.","status":"closed","priority":1,"issue_type":"feature","owner":"quinnosha@gmail.com","created_at":"2026-02-25T13:29:20.996574-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:44:18.101205-08:00","closed_at":"2026-02-25T15:44:18.101205-08:00","close_reason":"Backend shipped: POST /api/v1/tunnels/ returns { tunnelId, tunnelKey, keyId, expiresAt }. executeWorkflow now returns null for tunnel fields. BrowserSetupExecutor uses contextData.targetUrl verbatim."}
{"id":"debugg-ai-mcp-ay0","title":"Tests: utils/tunnelContext.ts isolation","description":"tunnelContext.ts functions are exercised indirectly through handler tests but never tested in isolation.\n\nTests to write:\n\nbuildContext(url):\n- Public URL: { originalUrl: url, isLocalhost: false }\n- localhost URL: { originalUrl: url, isLocalhost: true }\n\nensureTunnel(ctx, tunnelKey, tunnelId):\n- Non-localhost ctx: returns ctx unchanged (no tunnelManager call)\n- Localhost ctx: calls tunnelManager.processUrl with correct args, returns ctx with tunnelId and targetUrl set\n- tunnelManager.processUrl throws: error propagates\n\nreleaseTunnel(ctx):\n- ctx without tunnelId: no-op (no stopTunnel call)\n- ctx with tunnelId: calls tunnelManager.stopTunnel(tunnelId)\n\nsanitizeResponseUrls(value, ctx):\n- Non-localhost ctx: returns value unchanged\n- Localhost ctx: calls replaceTunnelUrls with correct origin\n\nMock tunnelManager via jest.unstable_mockModule.","status":"closed","priority":3,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:06:28.193944-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:37.349244-08:00","closed_at":"2026-02-25T16:15:37.349244-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-brl","title":"MCP: TunnelManager shared tunnel mode for Caddy","description":"Update TunnelManager to support a shared-tunnel mode alongside the current per-port mode.\n\ngetOrCreateSharedTunnel(tunnelId, tunnelKey): creates one ngrok tunnel pointing to the Caddy port. Reuses if already active.\nensurePortRoute(port): calls CaddyProxy.addRoute(port) if not already registered\neffectiveUrl(originalUrl): returns https://{tunnelId}.ngrok.debugg.ai/p/{port}{pathname}\n\nThe existing per-port tunnel logic stays for non-Caddy fallback (when caddy binary not available).","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T13:29:21.298393-08:00","created_by":"Quinn","updated_at":"2026-02-25T13:57:55.004079-08:00","closed_at":"2026-02-25T13:57:55.004079-08:00","close_reason":"TunnelManager Caddy shared tunnel mode implemented and all 17 tests passing. Fixed ngrok mock by switching from createRequire to ESM dynamic import. Added forceExit:true to jest.config.js to handle 55-min auto-shutoff timers.","dependencies":[{"issue_id":"debugg-ai-mcp-brl","depends_on_id":"debugg-ai-mcp-lb8","type":"blocks","created_at":"2026-02-25T13:29:25.315746-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-cyk","title":"Tests: test that progress notifications fire during long runs","description":"Write tests verifying progressCallback is invoked at regular intervals during polling. Verify heartbeat fires when no step update. Verify progress token passed correctly through createProgressCallback.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:42.8089-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.036015-08:00","closed_at":"2026-02-17T16:10:38.036015-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-cyk","depends_on_id":"debugg-ai-mcp-2us","type":"blocks","created_at":"2026-02-17T15:58:56.744322-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-cza","title":"Session screenshot fails when session in FAILED/not-ready state","description":"POST /api/v1/browser-sessions/sessions/{id}/screenshot/ returns 400 'Session cannot accept actions' / session_status: FAILED. Sessions appear to fail immediately after creation (async setup). Issues: 1) sessionId field mismatch means wrong ID may be used, 2) even with correct ID, session setup is async and caller must wait for can_accept_actions=true before taking screenshots. getLiveSessionScreenshotHandler currently calls screenshot without first polling for session readiness.","status":"closed","priority":2,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T12:01:40.350617-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:20.85574-08:00","closed_at":"2026-02-24T14:15:20.85574-08:00","close_reason":"Live session tools were deleted in the cleanup commits"}
{"id":"debugg-ai-mcp-e3y","title":"Tests: unit tests for workflow service + tools","description":"Mock AxiosTransport. Test: listTemplates returns filtered is_template results, cloneWorkflow posts to correct URL, executeWorkflow returns execution UUID, getExecution returns status correctly, cancelExecution calls cancel endpoint. Test run_evaluation handler: verify poll loop terminates on completed status, verify progress fires, verify error path returns isError:true.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:49.909407-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:43.759613-08:00","closed_at":"2026-02-24T14:15:43.759613-08:00","close_reason":"Tests exist and pass (98/98) covering workflow service and handler","dependencies":[{"issue_id":"debugg-ai-mcp-e3y","depends_on_id":"debugg-ai-mcp-2na","type":"blocks","created_at":"2026-02-17T16:00:58.711132-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-e3y","depends_on_id":"debugg-ai-mcp-koh","type":"blocks","created_at":"2026-02-17T16:00:58.778175-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-e3y","depends_on_id":"debugg-ai-mcp-8dv","type":"blocks","created_at":"2026-02-17T16:00:58.845154-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-e3y","depends_on_id":"debugg-ai-mcp-pdx","type":"blocks","created_at":"2026-02-19T12:25:39.422563-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-e6q","title":"Browser session response uses 'id' not 'sessionId'","description":"POST /api/v1/browser-sessions/sessions/ returns { id: '...', session_name: '...', ... } — the session identifier field is 'id', not 'session_id' or 'sessionId'. After the AxiosTransport camelCase transform, 'id' stays as 'id'. Our BrowserSession type defines 'sessionId: string' which is never populated. Impact: all downstream session calls (screenshot, logs, stop) receive sessionId=undefined and silently fail or throw confusing errors.","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T12:01:36.806237-08:00","created_by":"Quinn","updated_at":"2026-02-23T14:39:05.614297-08:00","closed_at":"2026-02-23T14:39:05.614297-08:00","close_reason":"normalizeSession() in browserSessions.ts maps id→sessionId on all returned session objects"}
{"id":"debugg-ai-mcp-e87","title":"Tests: TunnelsService (services/tunnels.ts)","description":"Zero coverage. Every localhost tool call goes through this service.\n\nTests to write (mock AxiosTransport):\n- provision() happy path: POST to api/v1/tunnels/, verify body { purpose: 'workflow' }, assert returned { tunnelId, tunnelKey, keyId, expiresAt }\n- provision() with custom purpose string: verify it's sent in body\n- provision() when response missing tunnelId: throws 'Tunnel provisioning failed: missing tunnelId'\n- provision() when response missing tunnelKey: throws same error\n- provision() when transport throws: error propagates\n- provision() default purpose is 'workflow' when not specified\n\nPattern: mock AxiosTransport.post() directly, import createTunnelsService, test in isolation.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:04:31.594395-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:14:08.360903-08:00","closed_at":"2026-02-25T16:14:08.360903-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-eem","title":"create_test_suite silently fails when repo_name/repo_path not configured","description":"POST /api/v1/test-suites/generate_tests/ requires repo_name and repo_path as required fields (400: {repo_name: ['This field is required.'], repo_path: ['This field is required.']}). Our tool marks them as optional with config defaults. When defaults are empty, the service catches the 400 error and returns null, causing the handler to throw 'Failed to create test suite - no response from service' — losing the actual error. Fix: surface the 400 validation errors to the user with actionable message about configuring DEBUGGAI_LOCAL_REPO_NAME and DEBUGGAI_LOCAL_REPO_PATH.","status":"closed","priority":2,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T12:01:43.35161-08:00","created_by":"Quinn","updated_at":"2026-02-23T14:39:05.720193-08:00","closed_at":"2026-02-23T14:39:05.720193-08:00","close_reason":"createE2eTestSuite/Commit now re-throw API errors; handlers validate repoName+repoPath early with actionable env-var message"}
{"id":"debugg-ai-mcp-eha","title":"Fix: finally block cleanup order and missing awaits","description":"testPageChangesHandler.ts finally block has two problems:\n\nProblem 1 — wrong order:\n  revokeNgrokKey(ngrokKeyId).catch(...)   ← fires first\n  releaseTunnel(ctx).catch(...)           ← fires second\n\nrevokeNgrokKey revokes the short-lived ngrok API key. If this runs before releaseTunnel, the ngrok disconnect() call inside releaseTunnel operates on an already-invalidated session → disconnect fails → the TunnelInfo entry stays in activeTunnels map → next call finds stale entry.\n\nProblem 2 — both fire-and-forget:\n  Neither is awaited. If the user immediately calls the tool again, the second call can start while cleanup from the first is still pending. The second ngrok.authtoken() call (if not fixed by x5e) can disrupt the first call's disconnect.\n\nFix:\n  await releaseTunnel(ctx)         ← disconnect first\n  revokeNgrokKey(ngrokKeyId)...    ← revoke after tunnel is cleanly closed\n\nThe key revocation is backend housekeeping and can remain fire-and-forget. The tunnel disconnect must complete first.","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-25T15:10:05.230074-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:46:06.323002-08:00","closed_at":"2026-02-25T15:46:06.323002-08:00","close_reason":"Implemented.","dependencies":[{"issue_id":"debugg-ai-mcp-eha","depends_on_id":"debugg-ai-mcp-6kd","type":"blocks","created_at":"2026-02-25T15:10:29.734252-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-foc","title":"Implement: guaranteed tunnel cleanup on all exit paths","description":"ngrok tunnel stopTunnel must be called on: normal completion, timeout, MCP client disconnect, thrown error, process SIGINT/SIGTERM. Use try/finally in handleE2eRun. Validate the tunnel URL format (currently passing https:// prefix inconsistently).","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:36.055867-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.030741-08:00","closed_at":"2026-02-17T16:10:38.030741-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-foc","depends_on_id":"debugg-ai-mcp-irs","type":"blocks","created_at":"2026-02-17T15:58:56.545867-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-fqu","title":"Research: design MCP tool surface for Workflows API","description":"Decide which endpoints become MCP tools. Proposed: (1) debugg_ai_list_templates — GET /workflows/?is_template=true. (2) debugg_ai_run_evaluation — high-level: clone eval template + execute + poll, returns agent response. (3) debugg_ai_execute_workflow — POST /workflows/{uuid}/execute/ for power users with own cloned workflows. (4) debugg_ai_get_execution_status — GET /executions/{uuid}/. (5) debugg_ai_cancel_execution — POST /executions/{uuid}/cancel/. (6) debugg_ai_list_executions — GET /executions/. Execution polling must share the safe async poll pattern from epic debugg-ai-mcp-6hk — do NOT implement before that epic's polling fix is in.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:25.529295-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:57.817968-08:00","closed_at":"2026-02-19T12:24:57.817968-08:00","close_reason":"Tool surface designed and shipped: check_app_in_browser is live","dependencies":[{"issue_id":"debugg-ai-mcp-fqu","depends_on_id":"debugg-ai-mcp-2zm","type":"blocks","created_at":"2026-02-17T16:00:58.259715-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-frz","title":"Telemetry: config support (POSTHOG_API_KEY, host, enabled)","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.411608-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.773561-08:00","closed_at":"2026-02-26T08:40:48.773561-08:00","close_reason":"Closed"}
{"id":"debugg-ai-mcp-g1i","title":"Tests: utils/imageUtils.ts (zero coverage)","description":"utils/imageUtils.ts has zero coverage. Used in handler to embed screenshots and GIFs.\n\nTests to write (mock global fetch):\n\nfetchImageAsBase64():\n- Success: fetches URL, converts response to base64, returns { data, mimeType }\n- Content-Type from response header is used as mimeType when present\n- Content-Type with charset (e.g. 'image/jpeg; charset=utf-8'): strips charset, uses 'image/jpeg'\n- No Content-Type header: falls back to inferMimeFromUrl()\n- fetch throws (network error): returns null (swallowed)\n- Response not ok (404, 500): returns null\n- 15 second timeout applied to fetch (verify AbortSignal or timeout logic)\n\ninferMimeFromUrl() (or however MIME is inferred):\n- .png URL → 'image/png'\n- .jpg / .jpeg URL → 'image/jpeg'\n- .gif URL → 'image/gif'\n- .webp URL → 'image/webp'\n- unknown extension → fallback MIME type\n\nimageContentBlock(data, mimeType):\n- Returns { type: 'image', source: { type: 'base64', media_type: mimeType, data } }","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:05:55.225724-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:37.326486-08:00","closed_at":"2026-02-25T16:15:37.326486-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-g1j","title":"Telemetry: instrument tool lifecycle in index.ts","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.513585-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.829521-08:00","closed_at":"2026-02-26T08:40:48.829521-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-g1j","depends_on_id":"debugg-ai-mcp-07n","type":"blocks","created_at":"2026-02-26T08:36:58.129316-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-g3e","title":"Stop session endpoint: PATCH /api/v1/browser-sessions/sessions/{id}/ returns 405","description":"Our stopSession service calls PATCH /api/v1/browser-sessions/sessions/{id}/ with { status: 'COMPLETED' }. The API returns 405 Method Not Allowed. Need to confirm the correct endpoint/method for stopping a live session (may be DELETE or a dedicated /stop/ action endpoint). Coordinate with API team.","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T12:01:37.818688-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:20.854031-08:00","closed_at":"2026-02-24T14:15:20.854031-08:00","close_reason":"Live session tools were deleted in the cleanup commits"}
{"id":"debugg-ai-mcp-h3r","title":"QA: manual end-to-end test of run_evaluation tool","description":"Using MCP inspector or Claude: call debugg_ai_run_evaluation with a real public URL and question. Verify: template is found and cloned, execution starts, progress notifications appear, result contains agent response text. Also verify debugg_ai_cancel_execution works on a running execution.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:49.999447-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:58.00357-08:00","closed_at":"2026-02-19T12:24:58.00357-08:00","close_reason":"QA done: check_app_in_browser passed against debugg.ai","dependencies":[{"issue_id":"debugg-ai-mcp-h3r","depends_on_id":"debugg-ai-mcp-e3y","type":"blocks","created_at":"2026-02-17T16:00:58.92341-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-ho1","title":"Fix live session tunnel race condition","description":"liveSessionHandlers.ts generates a tunnelId and constructs the tunnel URL BEFORE calling backend startSession(). The backend may try to validate/ping that tunnel URL before we've created it, causing 502s.\n\nFix: mirror the workflow handler pattern:\n1. Call startSession() with the original localhost URL (not a pre-fabricated tunnel URL)\n2. Backend returns tunnelKey in the session response\n3. THEN create the tunnel using tunnelManager.processUrl() with that tunnelKey\n\nRequires backend support for receiving originalUrl and returning tunnelKey (check if /api/v1/browser-sessions/sessions/ already supports this — the quick test showed no tunnel_key in response, which may mean the endpoint needs updating or the flow needs to differ).","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-23T16:36:09.165728-08:00","created_by":"Quinn","updated_at":"2026-02-23T16:40:25.105428-08:00","closed_at":"2026-02-23T16:40:25.105428-08:00","close_reason":"Closed"}
{"id":"debugg-ai-mcp-hx5","title":"Fix: progress formula to not stall when steps=0","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:47.931769-08:00","created_by":"Quinn","updated_at":"2026-02-23T17:57:35.983892-08:00","closed_at":"2026-02-23T17:57:35.983892-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-hx5","depends_on_id":"debugg-ai-mcp-ocd","type":"blocks","created_at":"2026-02-23T17:52:08.086927-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-ij3","title":"Telemetry: instrument tunnel operations","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-26T08:36:52.515489-08:00","created_by":"Quinn","updated_at":"2026-02-26T08:40:48.894129-08:00","closed_at":"2026-02-26T08:40:48.894129-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-ij3","depends_on_id":"debugg-ai-mcp-07n","type":"blocks","created_at":"2026-02-26T08:36:58.142698-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-irs","title":"Design: proper polling and cancellation architecture","description":"Design replacement for setInterval/busy-wait pattern. Must handle: AbortController for cancellation, progress notifications that prevent MCP timeout, safe async poll loop, ngrok tunnel cleanup on any exit path, single unified polling implementation (remove blockingHandleE2eRun).","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:26.615352-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.027571-08:00","closed_at":"2026-02-17T16:10:38.027571-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-irs","depends_on_id":"debugg-ai-mcp-n9b","type":"blocks","created_at":"2026-02-17T15:58:56.4169-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-kk3","title":"Tests: testPageChangesHandler integration","description":"Current handler tests only validate schemas and polling logic snippets — the actual handler function is never called. Need handler-level integration tests with all services mocked.\n\nMock with jest.unstable_mockModule:\n- DebuggAIServerClient (provision, findEvaluationTemplate, executeWorkflow, pollExecution, revokeNgrokKey)\n- tunnelManager.processUrl\n\nTests to write:\nHappy paths:\n- Public URL: no tunnel provision, contextData.targetUrl == originalUrl, returns outcome + stepsTaken\n- Localhost URL: provision() called first, ensureTunnel() called, contextData.targetUrl == tunnel URL (not originalUrl), revokeNgrokKey called in finally\n\nFailure paths:\n- provision() throws: handler throws, revokeNgrokKey NOT called (keyId never set), releaseTunnel called\n- findEvaluationTemplate returns null: throws template-not-found error, cachedTemplateUuid stays null\n- executeWorkflow throws: error propagates, releaseTunnel still called in finally, revokeNgrokKey called if keyId was set\n- pollExecution times out / AbortSignal fires: error propagates\n\nCleanup order:\n- releaseTunnel is awaited before revokeNgrokKey fires (verify call order in finally)\n- cachedTemplateUuid is reset on 401/not-found error from executeWorkflow\n\nTemplate caching:\n- Second call reuses cachedTemplateUuid without calling findEvaluationTemplate again\n- Cache reset when executeWorkflow returns 401","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:04:36.722653-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:51.732343-08:00","closed_at":"2026-02-25T16:15:51.732343-08:00","close_reason":"Handler integration tests written and passing. 8 new tests in 'full handler flow' describe block: public URL flow, localhost tunnel provisioning, cleanup ordering, provision failure, template not found, executeWorkflow failure, failed poll outcome, template caching."}
{"id":"debugg-ai-mcp-koh","title":"Implement: debugg_ai_run_evaluation — high-level eval tool","description":"Power tool: wraps clone-template + execute + poll into a single agent-friendly call. Inputs: target_url (required), question (required), workflow_uuid (optional — if omitted, auto-finds and clones App Evaluation Template). Steps: (1) if no workflow_uuid: GET templates, find eval template, POST clone, PATCH is_active=true. (2) POST /execute/ with context_data. (3) Poll GET /executions/{uuid}/ with safe async loop + progress notifications. (4) Return agent textual response from execution.state. Must use same poll pattern as debugg-ai-mcp-pmr fix.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T16:00:40.179535-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:57.942352-08:00","closed_at":"2026-02-19T12:24:57.942352-08:00","close_reason":"Implemented as testPageChangesHandler / check_app_in_browser — shipped","dependencies":[{"issue_id":"debugg-ai-mcp-koh","depends_on_id":"debugg-ai-mcp-8vd","type":"blocks","created_at":"2026-02-17T16:00:58.498427-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-koh","depends_on_id":"debugg-ai-mcp-pmr","type":"blocks","created_at":"2026-02-17T16:00:58.642046-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-l3b","title":"Fix: surface polling errors instead of silently swallowing","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:49.663621-08:00","created_by":"Quinn","updated_at":"2026-02-23T17:57:36.003518-08:00","closed_at":"2026-02-23T17:57:36.003518-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-l3b","depends_on_id":"debugg-ai-mcp-ocd","type":"blocks","created_at":"2026-02-23T17:52:08.172558-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-lb8","title":"MCP: CaddyProxy service — shared local reverse proxy","description":"New service: services/caddy/caddyProxy.ts\n\nResponsibilities:\n- Find a free local port on startup\n- Write a Caddyfile with admin API enabled (:2019)\n- Spawn 'caddy run' process, track PID\n- addRoute(port): POST to Caddy admin API to add path-prefix route /p/{port}/* → localhost:{port} with path stripping\n- isRouteRegistered(port): check existing routes\n- stop(): kill caddy process on MCP shutdown\n- Singleton across session\n\nRoute config via Caddy admin API:\n  PUT /config/apps/http/servers/proxy/routes\n  handle_path /p/{port}/* → reverse_proxy localhost:{port}\n\nPrereq: caddy binary must be installed (brew install caddy / apt install caddy).\nLog clear error if caddy not found: 'Install caddy: https://caddyserver.com/docs/install'","status":"closed","priority":1,"issue_type":"feature","owner":"quinnosha@gmail.com","created_at":"2026-02-25T13:29:21.204262-08:00","created_by":"Quinn","updated_at":"2026-02-25T13:39:00.535338-08:00","closed_at":"2026-02-25T13:39:00.535338-08:00","close_reason":"CaddyProxy service implemented at services/caddy/caddyProxy.ts. 19 tests covering pure logic, start/stop lifecycle, addRoute, Docker upstream, deduplication, and error paths."}
{"id":"debugg-ai-mcp-lmm","title":"findEvaluationTemplate: fail explicitly if no matching template found","description":"workflows.ts findEvaluationTemplate() falls back to templates[0] if no template name contains 'app evaluation'. This silently uses a random workflow if the backend has templates but none match the name. Should throw a clear error if no match instead of using a potentially wrong template. Also consider: what if the backend returns no templates at all vs wrong templates — both should have distinct error messages.","status":"closed","priority":2,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-24T14:16:03.621023-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:24:45.904293-08:00","closed_at":"2026-02-24T14:24:45.904293-08:00","close_reason":"findEvaluationTemplate now throws with descriptive error listing available templates instead of silently using templates[0]"}
{"id":"debugg-ai-mcp-m4x","title":"QA: manual verification of 15-min E2E run stability","description":"Run a real slow E2E test end-to-end via MCP client (Claude or inspector). Verify: progress updates appear, connection stays alive, result arrives, tunnel cleans up. Test with MCP inspector and with actual Claude client.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:49.172004-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:30.800429-08:00","closed_at":"2026-02-24T14:15:30.800429-08:00","close_reason":"1.0.30 is deployed with poll-based approach, no more setInterval/busy-wait","dependencies":[{"issue_id":"debugg-ai-mcp-m4x","depends_on_id":"debugg-ai-mcp-a1n","type":"blocks","created_at":"2026-02-17T15:58:56.818013-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-m4x","depends_on_id":"debugg-ai-mcp-cyk","type":"blocks","created_at":"2026-02-17T15:58:56.882794-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-mfn","title":"pollExecution: no cancellation path if MCP client disconnects","description":"workflows.ts pollExecution() has no way to cancel mid-flight. If the MCP client disconnects or times out, the poll loop continues running for up to 10 minutes, leaving ghost ngrok tunnels open and wasting resources. Should add an AbortSignal or cancellation token so the server-side cleanup (revokeNgrokKey + releaseTunnel) fires immediately when the MCP transport closes. Related: the finally block in testPageChangesHandler cleans up tunnels on tool completion but not on client disconnect.","status":"closed","priority":2,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-24T14:16:09.299063-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:24:45.994045-08:00","closed_at":"2026-02-24T14:24:45.994045-08:00","close_reason":"pollExecution accepts AbortSignal; handler wires AbortController to process.stdin close event; tests added"}
{"id":"debugg-ai-mcp-myh","title":"Merge \u0026 deploy fix","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:51.418173-08:00","created_by":"Quinn","updated_at":"2026-02-23T18:02:55.170162-08:00","closed_at":"2026-02-23T18:02:55.170162-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-myh","depends_on_id":"debugg-ai-mcp-2hi","type":"blocks","created_at":"2026-02-23T17:52:15.122789-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-n9b","title":"Research: audit long-running task failure modes","description":"Review handleE2eRun, blockingHandleE2eRun, pollForCompletion. Document: race conditions in async setInterval, busy-wait while loop, orphaned tunnels on MCP timeout, missing cancellation, duplicate code. Identify which 2025-11-25 spec features (Tasks, cancellation) apply.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:26.521916-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.023119-08:00","closed_at":"2026-02-17T16:10:38.023119-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-n9b","depends_on_id":"debugg-ai-mcp-6hk","type":"blocks","created_at":"2026-02-17T15:58:57.011411-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-nyw","title":"Add ngrok key revocation after workflow execution","description":"After execution completes (or errors), call POST /api/v1/ngrok/revoke/ with { ngrok_key_id } in the finally block. Add revokeNgrokKey(ngrokKeyId: string) method to DebuggAIServerClient (or as a standalone service call). Do NOT rely on the 15min Celery sweep — always revoke explicitly for clean teardown. ngrok_key_id comes from the WorkflowExecuteResponse (see debugg-ai-mcp-uvy). Depends on debugg-ai-mcp-uvy.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T12:25:18.03867-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:29:58.177188-08:00","closed_at":"2026-02-19T12:29:58.177188-08:00","close_reason":"revokeNgrokKey added to client, called in handler finally block","dependencies":[{"issue_id":"debugg-ai-mcp-nyw","depends_on_id":"debugg-ai-mcp-uvy","type":"blocks","created_at":"2026-02-19T12:25:38.745717-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-ocd","title":"Design review: polling progress fix","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:47.680909-08:00","created_by":"Quinn","updated_at":"2026-02-23T17:57:35.940538-08:00","closed_at":"2026-02-23T17:57:35.940538-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-ocd","depends_on_id":"debugg-ai-mcp-psb","type":"blocks","created_at":"2026-02-23T17:52:04.390493-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-owj","title":"Refactor all tool handlers to use shared tunnel context","description":"Once the shared tunnel context resolver exists (debugg-ai-mcp-1s7), rip out the per-tool tunnel logic:\n\n1. testPageChangesHandler.ts:\n   - Remove inline resolveTargetUrl(), isLocalhostUrl()\n   - Remove inline replaceTunnelUrls() call on surferOutput\n   - Use shared prepareRequest() and sanitizeResponse() instead\n\n2. liveSessionHandlers.ts (startLiveSessionHandler):\n   - Remove manual tunnelId generation before backend call\n   - Remove custom isLocalhost detection\n   - Use shared prepareRequest() after getting tunnelKey from session response\n\n3. quickScreenshot tool:\n   - Add shared prepareRequest() call before API invocation\n\nGoal: no tunnel or URL-replacement logic in individual handlers — all of it lives in the shared layer.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T16:36:15.233988-08:00","created_by":"Quinn","updated_at":"2026-02-23T16:40:25.14539-08:00","closed_at":"2026-02-23T16:40:25.14539-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-owj","depends_on_id":"debugg-ai-mcp-1s7","type":"blocks","created_at":"2026-02-23T16:36:19.645198-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-p6y","title":"Shared Caddy proxy: one tunnel per machine, multiple local ports","description":"Instead of one ngrok tunnel per port, run a single Caddy reverse proxy locally that aggregates all local ports, with one tunnel to the internet.\n\nArchitecture:\n- CaddyProxy service: spawns caddy binary on a free local port, uses Caddy admin API (:2019) for dynamic route management\n- Routes by path prefix: /p/{port}/* → localhost:{port} (strips prefix before forwarding)\n- One persistent ngrok tunnel to the Caddy port per MCP session\n- TunnelManager extended: getOrCreateSharedTunnel(), ensurePortRoute(port) via admin API\n- Effective URL sent to backend: https://{tunnelId}.ngrok.debugg.ai/p/{port}/\n\nKey design constraint: backend's surfer must navigate to path-prefixed URL. Currently backend derives navigation URL from executionUuid. Need to confirm whether backend reads targetUrl from contextData verbatim or always constructs from executionUuid. If verbatim, we update contextData.targetUrl post-tunnel-creation.\n\nPrereqs:\n- Caddy binary available on user machine (brew install caddy) OR bundled\n- Backend API confirmed to use targetUrl verbatim for navigation\n- Path-prefix stripping in Caddy must work for app asset requests (relative URLs work, absolute localhost refs need CDP interception handled separately)","status":"closed","priority":1,"issue_type":"feature","owner":"quinnosha@gmail.com","created_at":"2026-02-25T12:25:36.164589-08:00","created_by":"Quinn","updated_at":"2026-02-25T14:13:04.409991-08:00","closed_at":"2026-02-25T14:13:04.409991-08:00","close_reason":"Implemented in two parts: CaddyProxy service (services/caddy/caddyProxy.ts) and TunnelManager Caddy mode (services/ngrok/tunnelManager.ts). 17 tests passing. Per-port fallback also working."}
{"id":"debugg-ai-mcp-pdx","title":"Update tests: workflow service + handler tunnel flow","description":"Update/add tests for: (1) WorkflowsService.executeWorkflow now returns WorkflowExecuteResponse with tunnel fields — mock and assert new shape. (2) testPageChangesHandler execute-first flow — mock executeWorkflow to return tunnel_key, verify tunnel is created after execute (not before). (3) getNgrokAuthToken removal — ensure no tests depend on it. (4) ngrok revocation — verify revokeNgrokKey called in finally. Depends on debugg-ai-mcp-uvy, debugg-ai-mcp-2pf, debugg-ai-mcp-nyw, debugg-ai-mcp-5ga.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T12:25:33.214107-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:29:58.355154-08:00","closed_at":"2026-02-19T12:29:58.355154-08:00","close_reason":"Tests added: testPageChangesHandler.test.ts covers new flow, env params, revocation logic","dependencies":[{"issue_id":"debugg-ai-mcp-pdx","depends_on_id":"debugg-ai-mcp-uvy","type":"blocks","created_at":"2026-02-19T12:25:39.041912-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-pdx","depends_on_id":"debugg-ai-mcp-2pf","type":"blocks","created_at":"2026-02-19T12:25:39.137785-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-pdx","depends_on_id":"debugg-ai-mcp-nyw","type":"blocks","created_at":"2026-02-19T12:25:39.235572-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-pdx","depends_on_id":"debugg-ai-mcp-5ga","type":"blocks","created_at":"2026-02-19T12:25:39.331956-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-pmr","title":"Implement: replace setInterval/busy-wait with safe async loop","description":"In e2eRunner.ts handleE2eRun: replace setInterval+while(!stopped) with a proper async poll loop using await sleep(). Fix async callback race condition. Add AbortController for cancellation. Remove duplicate blockingHandleE2eRun. Same fix in quickScreenshot pollForCompletion.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:35.945639-08:00","created_by":"Quinn","updated_at":"2026-02-17T16:10:38.02923-08:00","closed_at":"2026-02-17T16:10:38.02923-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-pmr","depends_on_id":"debugg-ai-mcp-irs","type":"blocks","created_at":"2026-02-17T15:58:56.481778-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-psb","title":"Design: reliable progress reporting during workflow poll","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:47.540161-08:00","created_by":"Quinn","updated_at":"2026-02-23T17:57:35.921089-08:00","closed_at":"2026-02-23T17:57:35.921089-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-psb","depends_on_id":"debugg-ai-mcp-zas","type":"blocks","created_at":"2026-02-23T17:52:02.557538-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-t0y","title":"Tests: logger sanitization of sensitive fields","description":"Logger sanitizes sensitive keys but this is never verified in tests.\n\nGaps in __tests__/utils/logger.test.ts:\n\nsensitizeInput():\n- Object with 'authtoken' key: value replaced with '[REDACTED]'\n- Object with 'password' key: value replaced with '[REDACTED]'\n- Object with 'apiKey' key: value replaced with '[REDACTED]'\n- Nested object with sensitive key: top-level only redacted (shallow), or deep — verify actual behavior\n- Array with objects containing sensitive keys: verify behavior\n- Non-object input (string, number): returned as-is\n\nLog format:\n- LOG_FORMAT=json env var: logger uses JSON format\n- LOG_FORMAT not set: uses simple format","status":"closed","priority":3,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:06:37.990131-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:27.13174-08:00","closed_at":"2026-02-25T16:15:27.13174-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-u44","title":"QA: manual tunnel test with localhost URL","description":"Manually verify the full ngrok tunnel flow works end-to-end.\n\nSteps:\n1. Run a local dev server (e.g. http://localhost:3000)\n2. Call check_app_in_browser with url=http://localhost:3000\n3. Confirm: tunnel created, backend browser agent can reach the app\n4. Confirm: tunnel cleaned up after run completes\n\nExpected: tunnelId logged, progress step 'Creating secure tunnel for localhost...' fires, result returns outcome from workflow execution.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T06:13:24.994852-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:24:58.06287-08:00","closed_at":"2026-02-19T12:24:58.06287-08:00","close_reason":"QA done: localhost:3000 tunnel test passed in session","dependencies":[{"issue_id":"debugg-ai-mcp-u44","depends_on_id":"debugg-ai-mcp-58t","type":"blocks","created_at":"2026-02-19T06:13:29.72062-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-uvy","title":"Update WorkflowsService.executeWorkflow: return full execute response","description":"Backend execute/ endpoint now returns tunnel_key, ngrok_key_id, ngrok_expires_at, resolved_environment_id, resolved_credential_id alongside resource_uuid. Update executeWorkflow() to: (1) return a WorkflowExecuteResponse object instead of just string, (2) accept optional env param ({ environmentId?, credentialId?, credentialRole?, username?, password? }), (3) pass env in request body. New interface: WorkflowExecuteResponse { executionUuid: string; tunnelKey: string | null; ngrokKeyId: string | null; ngrokExpiresAt: string | null; resolvedEnvironmentId: string | null; resolvedCredentialId: string | null; }. Callers in testPageChangesHandler.ts need updating too.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-19T12:25:05.472758-08:00","created_by":"Quinn","updated_at":"2026-02-19T12:29:57.991012-08:00","closed_at":"2026-02-19T12:29:57.991012-08:00","close_reason":"executeWorkflow returns WorkflowExecuteResponse with tunnelKey, ngrokKeyId, resolvedIds; accepts optional env"}
{"id":"debugg-ai-mcp-vp9","title":"Caddy mode silent fallback — no user-visible signal","description":"When caddy binary is not installed, TunnelManager silently falls back to per-port tunnel mode. The user gets no indication that:\na) Multi-port support is unavailable (only one port per ngrok tunnel in fallback mode)\nb) How to enable it (brew install caddy / apt install caddy)\n\nFix: when caddyAvailable is cached as false, emit a server-side log at WARN level AND surface it to the MCP caller via a progress notification message: 'Caddy not installed — using single-port tunnel mode. Install Caddy for multi-port support: brew install caddy'\n\nThis is a UX-only change, no API changes needed.","status":"closed","priority":3,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T14:13:29.325687-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:59:49.551969-08:00","closed_at":"2026-02-25T15:59:49.551969-08:00","close_reason":"Caddy removed entirely — no fallback UX needed."}
{"id":"debugg-ai-mcp-vtw","title":"Fix: stepsTaken field mapping and null state guard","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:46.282615-08:00","created_by":"Quinn","updated_at":"2026-02-23T17:57:35.965217-08:00","closed_at":"2026-02-23T17:57:35.965217-08:00","close_reason":"Closed","dependencies":[{"issue_id":"debugg-ai-mcp-vtw","depends_on_id":"debugg-ai-mcp-ocd","type":"blocks","created_at":"2026-02-23T17:52:07.999243-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-vv3","title":"Remove localPort param: auto-detect localhost from url","status":"closed","priority":0,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T12:25:18.523442-08:00","created_by":"Quinn","updated_at":"2026-02-25T12:25:23.40977-08:00","closed_at":"2026-02-25T12:25:23.40977-08:00","close_reason":"Done: removed localPort from TestPageChangesInputSchema, tools/testPageChanges.ts, tunnelContext.ts. url is now required, accepts localhost URLs directly. All 105 tests pass."}
{"id":"debugg-ai-mcp-x5e","title":"Fix: remove global ngrok.authtoken() call","description":"tunnelManager.ts calls ngrok.authtoken({ authtoken }) as a global setter before every connect(). This is dangerous:\n\n1. The ngrok JS SDK stores this in a global config file (~/.ngrok2/ngrok.yml or similar)\n2. Concurrent or rapid-sequential calls with different keys overwrite each other's global state\n3. The authtoken is ALREADY passed directly in connect() options — the global call is redundant\n\nFix: remove the ngrok.authtoken() call entirely from both createSharedTunnel() (line ~316) and createTunnel() (line ~447). The authtoken in the connect options is sufficient.\n\nBefore:\n  await ngrok.authtoken({ authtoken: authToken });\n  const tunnelUrl = await ngrok.connect({ proto: 'http', addr, hostname, authtoken: authToken });\n\nAfter:\n  const tunnelUrl = await ngrok.connect({ proto: 'http', addr, hostname, authtoken: authToken });\n\nTest: run two rapid sequential processUrl() calls and verify both succeed without authtoken interference.","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-25T15:09:56.670507-08:00","created_by":"Quinn","updated_at":"2026-02-25T15:46:06.302196-08:00","closed_at":"2026-02-25T15:46:06.302196-08:00","close_reason":"Implemented.","dependencies":[{"issue_id":"debugg-ai-mcp-x5e","depends_on_id":"debugg-ai-mcp-6kd","type":"blocks","created_at":"2026-02-25T15:10:29.633179-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-xcs","title":"Merge \u0026 Deploy: long-running task fixes","description":"Version bump, npm publish, docker build and push. Update CLAUDE.md with the new polling architecture pattern.","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-17T15:58:49.271812-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:15:30.901353-08:00","closed_at":"2026-02-24T14:15:30.901353-08:00","close_reason":"Long-running task fix shipped in 1.0.30 (poll loop via workflows service)","dependencies":[{"issue_id":"debugg-ai-mcp-xcs","depends_on_id":"debugg-ai-mcp-m4x","type":"blocks","created_at":"2026-02-17T15:58:56.946919-08:00","created_by":"Quinn"},{"issue_id":"debugg-ai-mcp-xcs","depends_on_id":"debugg-ai-mcp-6hk","type":"blocks","created_at":"2026-02-17T15:58:57.071758-08:00","created_by":"Quinn"}]}
{"id":"debugg-ai-mcp-xzo","title":"Tests: utils/errors.ts (zero coverage)","description":"utils/errors.ts is used in every handler but has zero tests.\n\nTests to write:\n\ncreateErrorResponse(message, details?):\n- Returns { content: [{ type: 'text', text: JSON }], isError: true }\n- Includes details when provided\n- Works without details\n\nhandleExternalServiceError(error, service, operation):\n- Error instance: wraps message, preserves stack in log\n- Non-Error (string): wraps it\n- 401/403 errors: produces authentication error message\n- Network/timeout errors: includes service name in message\n- Returns something throwable (McpError or re-throw)\n\nhandleConfigurationError(message):\n- Returns/throws config error with clear message\n\nisRetryableError(error):\n- Network timeout → true\n- Rate limit (429) → true\n- Auth error (401) → false\n- Generic error → false\n\nwithErrorHandling(fn):\n- Success: passes through return value\n- Throws McpError: re-throws as-is\n- Throws Error: wraps in createErrorResponse or similar","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:05:49.472822-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:15:37.306496-08:00","closed_at":"2026-02-25T16:15:37.306496-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-yqo","title":"Tests: DebuggAIServerClient + isMcpRequest injection","description":"services/index.ts has zero test coverage.\n\nTests to write (mock AxiosTransport at the HTTP level using jest.unstable_mockModule on axios or by subclassing):\n\nisMcpRequest injection (DebuggTransport interceptor):\n- GET request: isMcpRequest=true added to params\n- POST request with existing body: isMcpRequest=true merged into body object\n- POST request with no body: body becomes { isMcpRequest: true }\n- Verify the flag is present on every outgoing request type\n\nDebuggAIServerClient:\n- init() creates workflows and tunnels services\n- revokeNgrokKey(keyId): POSTs to api/v1/ngrok/revoke/ with { ngrokKeyId: keyId }\n- revokeNgrokKey() throws 'Client not initialized' if called before init()\n- createClientService() factory: returns initialized client","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-25T16:05:40.042507-08:00","created_by":"Quinn","updated_at":"2026-02-25T16:14:51.065097-08:00","closed_at":"2026-02-25T16:14:51.065097-08:00","close_reason":"Tests written and passing."}
{"id":"debugg-ai-mcp-zas","title":"Investigate: API response shape for execution polling","status":"closed","priority":1,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-23T17:51:47.350807-08:00","created_by":"Quinn","updated_at":"2026-02-23T17:57:12.42697-08:00","closed_at":"2026-02-23T17:57:12.42697-08:00","close_reason":"state.stepsTaken is null during execution, only populated on completion. Fix: use nodeExecutions.length as progress proxy during polling."}
{"id":"debugg-ai-mcp-zdx","title":"Fix ngrok binary download breaking CI","description":"ngrok@5.0.0-beta.2 postinstall downloads binary from equinox.io which returns 503 in GitHub Actions. NGROK_SKIP_INSTALL_BINARY does not exist in this version's download.js — there is no skip mechanism. Fix: use 'npm ci --ignore-scripts' in both publish.yml and validate-setup.yml. Tests mock ngrok so no binary needed in CI. End users install without ignore-scripts so they get the binary normally.","status":"closed","priority":1,"issue_type":"bug","owner":"quinnosha@gmail.com","created_at":"2026-02-17T17:08:37.169417-08:00","created_by":"Quinn","updated_at":"2026-02-17T17:08:57.430364-08:00","closed_at":"2026-02-17T17:08:57.430364-08:00","close_reason":"Fixed: npm ci --ignore-scripts skips ngrok postinstall in both publish.yml and validate-setup.yml"}
{"id":"debugg-ai-mcp-zmu","title":"README: remove docs for deleted tools, reflect current 1-tool state","description":"README.md still documents 12 tools that no longer exist: create_test_suite, create_commit_suite, get_test_status, list_tests, list_test_suites, list_commit_suites, start_live_session, stop_live_session, get_live_session_status, get_live_session_logs, get_live_session_screenshot, quick_screenshot. All were deleted in the recent cleanup commits. README needs to be updated to accurately show only check_app_in_browser and reflect the current simplified architecture.","status":"closed","priority":2,"issue_type":"task","owner":"quinnosha@gmail.com","created_at":"2026-02-24T14:15:50.20588-08:00","created_by":"Quinn","updated_at":"2026-02-24T14:24:46.080794-08:00","closed_at":"2026-02-24T14:24:46.080794-08:00","close_reason":"README updated: removed 12 non-existent tools, now accurately shows check_app_in_browser with full parameter docs"}
